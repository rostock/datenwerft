{% extends "antragsmanagement/form.html" %}
{% load antragsmanagement_tags %}
{% load toolbox_tags %}
{% load static %}

{% block content %}
  {% if not user.is_authenticated or user.is_authenticated and has_necessary_permissions %}
    
    {% block errors %}
    	{{ block.super }}
    {% endblock %}
    
    <h2>{% if object %}aktualisieren{% else %}neu{% endif %} â†’ {{ model_verbose_name }}{% if object %} <em>{{ object }}</em>{% endif %}</h2>
    <form class="form mt-4" method="post" action="">
      {% csrf_token %}
      <div>
        <table class="table">
          {% for field in form %}
            <tr>
              <td class="cell-label">
                {{ field.label_tag }}
              </td>
              {% autoescape off %}
                <td class="cell-field">
                  {{ field }}
                </td>
              {% endautoescape %}
            </tr>
          {% endfor %}
        </table>
      </div>
      <div class="d-grid mt-5 mb-3 gap-2">
        <button class="btn btn-success" type="submit"><i class="fas fa-{{ 'save'|get_icon }}"></i> speichern</button>
        <a class="btn btn-warning" role="button" href="{{ cancel_url }}"><i class="fas fa-{{ 'cancel'|get_icon }}"></i> abbrechen</a>
      </div>
    </form>
    <script>
      /**
       * @function
       *
       * main function
       */
      $(document).ready(function () {
        keepDjangoRequiredMessages();
      });
    </script>
  {% else %}
    {% include "antragsmanagement/notice_no-permissions.html" %}
  {% endif %}
{% endblock %}
